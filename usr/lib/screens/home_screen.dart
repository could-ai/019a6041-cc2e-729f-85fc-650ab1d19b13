import 'package:flutter/material.dart';\nimport '../models/phone.dart';\nimport '../data/mock_phones.dart';\nimport 'phone_detail_screen.dart';\nimport 'cart_screen.dart';\n\nclass HomeScreen extends StatefulWidget {\n  const HomeScreen({super.key});\n\n  @override\n  State<HomeScreen> createState() => _HomeScreenState();\n}\n\nclass _HomeScreenState extends State<HomeScreen> {\n  String selectedCategory = 'All';\n  List<Phone> cartItems = [];\n\n  List<Phone> get filteredPhones {\n    if (selectedCategory == 'All') {\n      return mockPhones;\n    }\n    return mockPhones.where((phone) => phone.brand == selectedCategory).toList();\n  }\n\n  void addToCart(Phone phone) {\n    setState(() {\n      cartItems.add(phone);\n    });\n    ScaffoldMessenger.of(context).showSnackBar(\n      SnackBar(\n        content: Text('${phone.name} added to cart'),\n        duration: const Duration(seconds: 2),\n        action: SnackBarAction(\n          label: 'VIEW CART',\n          onPressed: () {\n            Navigator.push(\n              context,\n              MaterialPageRoute(\n                builder: (context) => CartScreen(cartItems: cartItems),\n              ),\n            );\n          },\n        ),\n      ),\n    );\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: const Text('Phone Sales', style: TextStyle(fontWeight: FontWeight.bold)),\n        elevation: 0,\n        actions: [\n          Stack(\n            children: [\n              IconButton(\n                icon: const Icon(Icons.shopping_cart),\n                onPressed: () {\n                  Navigator.push(\n                    context,\n                    MaterialPageRoute(\n                      builder: (context) => CartScreen(cartItems: cartItems),\n                    ),\n                  );\n                },\n              ),\n              if (cartItems.isNotEmpty)\n                Positioned(\n                  right: 8,\n                  top: 8,\n                  child: Container(\n                    padding: const EdgeInsets.all(4),\n                    decoration: BoxDecoration(\n                      color: Colors.red,\n                      borderRadius: BorderRadius.circular(10),\n                    ),\n                    constraints: const BoxConstraints(\n                      minWidth: 18,\n                      minHeight: 18,\n                    ),\n                    child: Text(\n                      '${cartItems.length}',\n                      style: const TextStyle(\n                        color: Colors.white,\n                        fontSize: 10,\n                        fontWeight: FontWeight.bold,\n                      ),\n                      textAlign: TextAlign.center,\n                    ),\n                  ),\n                ),\n            ],\n          ),\n        ],\n      ),\n      body: Column(\n        children: [\n          // Category Filter\n          Container(\n            height: 60,\n            padding: const EdgeInsets.symmetric(vertical: 10),\n            child: ListView.builder(\n              scrollDirection: Axis.horizontal,\n              padding: const EdgeInsets.symmetric(horizontal: 16),\n              itemCount: phoneCategories.length,\n              itemBuilder: (context, index) {\n                final category = phoneCategories[index];\n                final isSelected = category == selectedCategory;\n                return Padding(\n                  padding: const EdgeInsets.only(right: 8),\n                  child: FilterChip(\n                    label: Text(category),\n                    selected: isSelected,\n                    onSelected: (selected) {\n                      setState(() {\n                        selectedCategory = category;\n                      });\n                    },\n                    backgroundColor: Colors.grey[200],\n                    selectedColor: Theme.of(context).colorScheme.primary,\n                    labelStyle: TextStyle(\n                      color: isSelected ? Colors.white : Colors.black87,\n                      fontWeight: isSelected ? FontWeight.bold : FontWeight.normal,\n                    ),\n                  ),\n                );\n              },\n            ),\n          ),\n          // Phone Grid\n          Expanded(\n            child: GridView.builder(\n              padding: const EdgeInsets.all(16),\n              gridDelegate: const SliverGridDelegateWithFixedCrossAxisCount(\n                crossAxisCount: 2,\n                childAspectRatio: 0.65,\n                crossAxisSpacing: 16,\n                mainAxisSpacing: 16,\n              ),\n              itemCount: filteredPhones.length,\n              itemBuilder: (context, index) {\n                final phone = filteredPhones[index];\n                return PhoneCard(\n                  phone: phone,\n                  onTap: () {\n                    Navigator.push(\n                      context,\n                      MaterialPageRoute(\n                        builder: (context) => PhoneDetailScreen(\n                          phone: phone,\n                          onAddToCart: () => addToCart(phone),\n                        ),\n                      ),\n                    );\n                  },\n                  onAddToCart: () => addToCart(phone),\n                );\n              },\n            ),\n          ),\n        ],\n      ),\n    );\n  }\n}\n\nclass PhoneCard extends StatelessWidget {\n  final Phone phone;\n  final VoidCallback onTap;\n  final VoidCallback onAddToCart;\n\n  const PhoneCard({\n    super.key,\n    required this.phone,\n    required this.onTap,\n    required this.onAddToCart,\n  });\n\n  @override\n  Widget build(BuildContext context) {\n    return Card(\n      elevation: 2,\n      shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(16)),\n      child: InkWell(\n        onTap: onTap,\n        borderRadius: BorderRadius.circular(16),\n        child: Column(\n          crossAxisAlignment: CrossAxisAlignment.start,\n          children: [\n            // Phone Image\n            Expanded(\n              flex: 3,\n              child: Container(\n                decoration: BoxDecoration(\n                  borderRadius: const BorderRadius.vertical(top: Radius.circular(16)),\n                  color: Colors.grey[100],\n                ),\n                child: Center(\n                  child: Image.network(\n                    phone.imageUrl,\n                    fit: BoxFit.cover,\n                    errorBuilder: (context, error, stackTrace) {\n                      return Icon(Icons.phone_android, size: 80, color: Colors.grey[400]);\n                    },\n                  ),\n                ),\n              ),\n            ),\n            // Phone Info\n            Expanded(\n              flex: 2,\n              child: Padding(\n                padding: const EdgeInsets.all(12),\n                child: Column(\n                  crossAxisAlignment: CrossAxisAlignment.start,\n                  children: [\n                    Text(\n                      phone.brand,\n                      style: TextStyle(\n                        fontSize: 12,\n                        color: Colors.grey[600],\n                        fontWeight: FontWeight.w500,\n                      ),\n                    ),\n                    const SizedBox(height: 4),\n                    Text(\n                      phone.name,\n                      style: const TextStyle(\n                        fontSize: 14,\n                        fontWeight: FontWeight.bold,\n                      ),\n                      maxLines: 2,\n                      overflow: TextOverflow.ellipsis,\n                    ),\n                    const Spacer(),\n                    Row(\n                      mainAxisAlignment: MainAxisAlignment.spaceBetween,\n                      children: [\n                        Text(\n                          '\$${phone.price.toStringAsFixed(0)}',\n                          style: TextStyle(\n                            fontSize: 16,\n                            fontWeight: FontWeight.bold,\n                            color: Theme.of(context).colorScheme.primary,\n                          ),\n                        ),\n                        InkWell(\n                          onTap: onAddToCart,\n                          child: Container(\n                            padding: const EdgeInsets.all(6),\n                            decoration: BoxDecoration(\n                              color: Theme.of(context).colorScheme.primary,\n                              borderRadius: BorderRadius.circular(8),\n                            ),\n                            child: const Icon(\n                              Icons.add_shopping_cart,\n                              size: 18,\n                              color: Colors.white,\n                            ),\n                          ),\n                        ),\n                      ],\n                    ),\n                  ],\n                ),\n              ),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}